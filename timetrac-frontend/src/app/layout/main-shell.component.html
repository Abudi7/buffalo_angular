<!-- Glass header with gradient underline -->
<ion-header class="app-header">
  <ion-toolbar class="glass">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>

    <ion-title>
      <span class="brand"> <span class="logo-dot"></span> TimeTrac </span>
      <span class="brand-sub">Dashboard</span>
    </ion-title>

    <ion-buttons slot="end">
      <ion-button
        fill="clear"
        (click)="cycleLang()"
        aria-label="Switch language"
      >
        <ion-icon slot="icon-only" [name]="'globe-outline'"></ion-icon>
      </ion-button>
      <ng-container *ngIf="userEmail$ | async as email">
        <ion-chip class="user-chip">
          <ion-avatar>
            <img [src]="avatarFor(email)" alt="avatar" />
          </ion-avatar>
          <ion-label class="email">{{ email }}</ion-label>
        </ion-chip>

        <ion-button fill="clear" class="logout-btn" (click)="onLogout()">
          <ion-icon slot="start" [name]="'logOutOutline'"></ion-icon>
          Logout
        </ion-button>
      </ng-container>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- Split pane: animated frosted sidebar + content area -->
<ion-split-pane contentId="main-content" class="app-split">
  <ion-menu contentId="main-content" class="frosted-menu animated-menu">
    <ion-content class="menu-bg">
      <div class="menu-header animated-menu-header">
        <div class="menu-title">Navigation</div>
        <div class="menu-sub">Quick access</div>
      </div>

      <ion-list lines="none" class="menu-list animated-menu-list">
        <ion-item
          routerLink="/home"
          routerDirection="root"
          routerLinkActive="active"
          detail="false"
          class="menu-item animated-menu-item"
          [style.animation-delay]="'0.1s'"
        >
          <ion-icon slot="start" [name]="'homeOutline'"></ion-icon>
          <ion-label>Home</ion-label>
        </ion-item>

        <ion-item
          routerLink="/settings"
          routerDirection="root"
          detail="false"
          class="menu-item animated-menu-item"
          [style.animation-delay]="'0.2s'"
        >
          <ion-icon slot="start" [name]="'settingsOutline'"></ion-icon>
          <ion-label>Settings</ion-label>
        </ion-item>

        <div class="menu-divider animated-divider" [style.animation-delay]="'0.3s'"></div>

        <ion-item detail="false" class="menu-item danger animated-menu-item" (click)="onLogout()" [style.animation-delay]="'0.4s'">
          <ion-icon slot="start" [name]="'logOutOutline'"></ion-icon>
          <ion-label>Logout</ion-label>
        </ion-item>
      </ion-list>
    </ion-content>
  </ion-menu>

  <!-- Routed pages render here -->
  <ion-router-outlet id="main-content"></ion-router-outlet>
</ion-split-pane>
