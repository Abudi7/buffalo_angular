// Lightweight i18n service with in-memory dictionaries (en, ar, de).
// Keeps current language in localStorage and provides translate() helper.
import { Injectable } from '@angular/core';

type Lang = 'en' | 'ar' | 'de';

const DICTS: Record<Lang, Record<string, string>> = {
  en: {
    app_title: 'TimeTrac',
    welcome_message: 'Welcome to your productivity dashboard',
    track_time: 'Track Time',
    select_project_tags_note_color: 'Select project, tags, note & color',
    tags: 'Tags',
    note: 'Note',
    refresh: 'Refresh',
    export_csv: 'Export CSV',
    start: 'Start',
    stop: 'Stop',
    entries: 'Entries',
    newest_first: 'Newest first',
    no_entries: 'No entries yet. Start your first session!',
    // Analytics translations
    'analytics.title': 'Analytics Dashboard',
    'analytics.dateRange': 'Date Range',
    'analytics.week': 'Week',
    'analytics.month': 'Month',
    'analytics.quarter': 'Quarter',
    'analytics.year': 'Year',
    'analytics.startDate': 'Start Date',
    'analytics.endDate': 'End Date',
    'analytics.keyMetrics': 'Key Metrics',
    'analytics.totalTime': 'Total Time',
    'analytics.avgDaily': 'Avg Daily',
    'analytics.totalProjects': 'Projects',
    'analytics.mostProductiveHour': 'Peak Hour',
    'analytics.dailyTracking': 'Daily Time Tracking',
    'analytics.projectDistribution': 'Project Distribution',
    'analytics.hourlyProductivity': 'Hourly Productivity',
    'analytics.weeklyComparison': 'Weekly Comparison',
    'analytics.insights': 'Insights',
    'analytics.mostProductiveDay': 'Most Productive Day',
    'analytics.topProject': 'Top Project',
    'analytics.totalEntries': 'Total Entries',
    'analytics.noData': 'No data available',
    // Teams translations
    'teams.title': 'Teams',
    'teams.myTeams': 'My Teams',
    'teams.pendingInvitations': 'Pending Invitations',
    'teams.invitedTo': 'Invited to',
    'teams.role': 'Role',
    'teams.accept': 'Accept',
    'teams.decline': 'Decline',
    'teams.noTeams': 'No teams yet',
    'teams.createFirstTeam': 'Create your first team to start collaborating',
    'teams.createTeam': 'Create Team',
    'teams.members': 'Members',
    'teams.invite': 'Invite',
    'teams.teamName': 'Team Name',
    'teams.enterTeamName': 'Enter team name',
    'teams.description': 'Description',
    'teams.enterDescription': 'Enter team description',
    'teams.inviteMember': 'Invite Member',
    'teams.email': 'Email',
    'teams.enterEmail': 'Enter email address',
    'teams.sendInvitation': 'Send Invitation',
    // Reports translations
    'reports.title': 'Reports',
    'reports.quickActions': 'Quick Actions',
    'reports.generateReport': 'Generate Report',
    'reports.scheduleReport': 'Schedule Report',
    'reports.previewReport': 'Preview Report',
    'reports.templates': 'Templates',
    'reports.scheduledReports': 'Scheduled Reports',
    'reports.noScheduledReports': 'No scheduled reports',
    'reports.createFirstScheduledReport': 'Create your first scheduled report',
    'reports.nextRun': 'Next run',
    'reports.basicSettings': 'Basic Settings',
    'reports.reportTitle': 'Report Title',
    'reports.enterReportTitle': 'Enter report title',
    'reports.reportType': 'Report Type',
    'reports.reportFormat': 'Report Format',
    'reports.dateRange': 'Date Range',
    'reports.startDate': 'Start Date',
    'reports.endDate': 'End Date',
    'reports.advancedOptions': 'Advanced Options',
    'reports.includeCharts': 'Include Charts',
    'reports.includeDetails': 'Include Details',
    'reports.groupBy': 'Group By',
    'reports.sortBy': 'Sort By',
    'reports.generating': 'Generating...',
    'reports.reportName': 'Report Name',
    'reports.enterReportName': 'Enter report name',
    'reports.schedule': 'Schedule',
    'reports.active': 'Active',
    'reports.createScheduledReport': 'Create Scheduled Report',
    'reports.reportPreview': 'Report Preview',
    'reports.summary': 'Summary',
    'reports.totalHours': 'Total Hours',
    'reports.totalEntries': 'Total Entries',
    'reports.charts': 'Charts',
    'reports.chartsWillBeIncluded': 'Charts will be included in the final report'
  },
  ar: {
    app_title: 'تايم ترك',
    welcome_message: 'مرحباً بك في لوحة الإنتاجية',
    track_time: 'تتبع الوقت',
    select_project_tags_note_color: 'اختر المشروع، الوسوم، الملاحظة واللون',
    tags: 'الوسوم',
    note: 'ملاحظة',
    refresh: 'تحديث',
    export_csv: 'تصدير CSV',
    start: 'ابدأ',
    stop: 'أوقف',
    entries: 'السجلات',
    newest_first: 'الأحدث أولاً',
    no_entries: 'لا توجد سجلات بعد. ابدأ أول جلسة!',
    // Analytics translations
    'analytics.title': 'لوحة التحليلات',
    'analytics.dateRange': 'نطاق التاريخ',
    'analytics.week': 'أسبوع',
    'analytics.month': 'شهر',
    'analytics.quarter': 'ربع سنة',
    'analytics.year': 'سنة',
    'analytics.startDate': 'تاريخ البداية',
    'analytics.endDate': 'تاريخ النهاية',
    'analytics.keyMetrics': 'المقاييس الرئيسية',
    'analytics.totalTime': 'إجمالي الوقت',
    'analytics.avgDaily': 'متوسط يومي',
    'analytics.totalProjects': 'المشاريع',
    'analytics.mostProductiveHour': 'ساعة الذروة',
    'analytics.dailyTracking': 'تتبع الوقت اليومي',
    'analytics.projectDistribution': 'توزيع المشاريع',
    'analytics.hourlyProductivity': 'الإنتاجية الساعية',
    'analytics.weeklyComparison': 'مقارنة أسبوعية',
    'analytics.insights': 'رؤى',
    'analytics.mostProductiveDay': 'أكثر يوم إنتاجية',
    'analytics.topProject': 'أفضل مشروع',
    'analytics.totalEntries': 'إجمالي السجلات',
    'analytics.noData': 'لا توجد بيانات متاحة',
    // Teams translations
    'teams.title': 'الفريق',
    'teams.myTeams': 'فرقي',
    'teams.pendingInvitations': 'الدعوات المعلقة',
    'teams.invitedTo': 'مدعو إلى',
    'teams.role': 'الدور',
    'teams.accept': 'قبول',
    'teams.decline': 'رفض',
    'teams.noTeams': 'لا توجد فرق بعد',
    'teams.createFirstTeam': 'أنشئ فريقك الأول للبدء في التعاون',
    'teams.createTeam': 'إنشاء فريق',
    'teams.members': 'الأعضاء',
    'teams.invite': 'دعوة',
    'teams.teamName': 'اسم الفريق',
    'teams.enterTeamName': 'أدخل اسم الفريق',
    'teams.description': 'الوصف',
    'teams.enterDescription': 'أدخل وصف الفريق',
    'teams.inviteMember': 'دعوة عضو',
    'teams.email': 'البريد الإلكتروني',
    'teams.enterEmail': 'أدخل عنوان البريد الإلكتروني',
    'teams.sendInvitation': 'إرسال الدعوة'
  },
  de: {
    app_title: 'TimeTrac',
    welcome_message: 'Willkommen in Ihrem Produktivitäts-Dashboard',
    track_time: 'Zeit erfassen',
    select_project_tags_note_color: 'Projekt, Tags, Notiz & Farbe wählen',
    tags: 'Tags',
    note: 'Notiz',
    refresh: 'Aktualisieren',
    export_csv: 'CSV exportieren',
    start: 'Start',
    stop: 'Stopp',
    entries: 'Einträge',
    newest_first: 'Neueste zuerst',
    no_entries: 'Noch keine Einträge. Starte deine erste Sitzung!',
    // Analytics translations
    'analytics.title': 'Analytics Dashboard',
    'analytics.dateRange': 'Zeitraum',
    'analytics.week': 'Woche',
    'analytics.month': 'Monat',
    'analytics.quarter': 'Quartal',
    'analytics.year': 'Jahr',
    'analytics.startDate': 'Startdatum',
    'analytics.endDate': 'Enddatum',
    'analytics.keyMetrics': 'Hauptkennzahlen',
    'analytics.totalTime': 'Gesamtzeit',
    'analytics.avgDaily': 'Täglich Ø',
    'analytics.totalProjects': 'Projekte',
    'analytics.mostProductiveHour': 'Hauptzeit',
    'analytics.dailyTracking': 'Tägliche Zeiterfassung',
    'analytics.projectDistribution': 'Projektverteilung',
    'analytics.hourlyProductivity': 'Stündliche Produktivität',
    'analytics.weeklyComparison': 'Wöchentlicher Vergleich',
    'analytics.insights': 'Einblicke',
    'analytics.mostProductiveDay': 'Produktivster Tag',
    'analytics.topProject': 'Top-Projekt',
    'analytics.totalEntries': 'Gesamteinträge',
    'analytics.noData': 'Keine Daten verfügbar',
    // Teams translations
    'teams.title': 'Teams',
    'teams.myTeams': 'Meine Teams',
    'teams.pendingInvitations': 'Ausstehende Einladungen',
    'teams.invitedTo': 'Eingeladen zu',
    'teams.role': 'Rolle',
    'teams.accept': 'Akzeptieren',
    'teams.decline': 'Ablehnen',
    'teams.noTeams': 'Noch keine Teams',
    'teams.createFirstTeam': 'Erstelle dein erstes Team für die Zusammenarbeit',
    'teams.createTeam': 'Team erstellen',
    'teams.members': 'Mitglieder',
    'teams.invite': 'Einladen',
    'teams.teamName': 'Team-Name',
    'teams.enterTeamName': 'Team-Name eingeben',
    'teams.description': 'Beschreibung',
    'teams.enterDescription': 'Team-Beschreibung eingeben',
    'teams.inviteMember': 'Mitglied einladen',
    'teams.email': 'E-Mail',
    'teams.enterEmail': 'E-Mail-Adresse eingeben',
    'teams.sendInvitation': 'Einladung senden'
  }
};

@Injectable({ providedIn: 'root' })
export class I18nService {
  private current: Lang = (localStorage.getItem('lang') as Lang) || 'en';

  get lang(): Lang { return this.current; }

  setLang(l: Lang) {
    this.current = l;
    localStorage.setItem('lang', l);
    document.dir = l === 'ar' ? 'rtl' : 'ltr';
    document.documentElement.lang = l;
  }

  t(key: string): string {
    const dict = DICTS[this.current] || DICTS.en;
    return dict[key] || key;
  }
}


